<script src="../../decision/js/SpryValidationTextField.js" type="text/javascript"></script>
<link href="../../decision/css/SpryValidationTextField.css" rel="stylesheet" type="text/css">
<link href="../../decision/css/style.css" rel="stylesheet" type="text/css">

<div class='panel panel-success my-success-panel' ng-show='isResultShown'>
	<div class="panel-heading">
        <h3 class="panel-title text-center" popover="{{Label.getContent('Product Portfolio Management Info')}}" popover-trigger="mouseenter" popover-placement="bottom">
            {{Label.getContent('Product Portfolio Management')}}
        </h3>
    </div>

    <table class="table table-condensed table-bordered table-success">
    	<thead>
            <tr>
                <th colspan="5">Promotion ('000 Dh)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="27%"><strong>Marché</strong></td>
                <td width="16%">Image</td>

                <td width="16%" ng-repeat="product in dec.products">{{$parent.productsRefs[$index]}}</td>
            </tr>

            <tr ng-repeat="market in dec.markets">
                <td>{{$parent.marketsRefs[$index]}}</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield1">
                        <input name="corporateComBudget" type="text" style="width:30px;" ng-model="market.corporateComBudget"  maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td ng-repeat="subMarket in market.products">
                    <label for="aec"></label>
                    <span id="sprytextfield2">
                        <input name="aep1" type="text" ng-model="subMarket.advertisingBudget" style="width:30px;" value="50" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
            </tr>


            <tr>
                <th colspan="5">Prix ( Dh ):</th>
            </tr>
            <tr ng-repeat="market in dec.markets">
                <td>{{$parent.marketsRefs[$index]}}</td>
                <td></td>
                <td ng-repeat="subMarket in market.products">
                    <label for="aec"></label>
                    <span id="sprytextfield13">
                        <input name="pep1" type="text" ng-model="subMarket.price" style="width:30px;" value="339" maxlength="5" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>
            </tr>


            <tr>
                <th colspan="5">Livraison pour :</th>
            </tr>
            <tr ng-repeat="market in dec.markets">
                <td>{{$parent.marketsRefs[$index]}}</td>
                <td></td>
                <td ng-repeat="subMarket in market.products">
                    <label for="aec"></label>
                    <span id="sprytextfield13">
                        <input name="pep1" type="text" ng-model="subMarket.deliveredQ" style="width:30px;" value="339" maxlength="5" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>
            </tr>


            <tr>
                <th colspan="5">qualité</th>
            </tr>
            <tr>
                <td colspan="2">Perfectionnements adoptés</td>
                <td ng-repeat="product in dec.products">
                    <input type="checkbox" name="impr1" ng-model="product.improvementsTakeup" />
                    <label for="impr1"></label>
                </td>

            </tr>
            <tr>
                <td colspan="2">Dépenses R &amp; D (' 000 Dh)</td>
                <td ng-repeat="product in dec.products">
                    <label for="aec"></label>
                    <span id="sprytextfield31">
                        <input name="devp1" type="text" ng-model="product.developmentBudget" style="width:30px;" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

            </tr>
            <tr>
                <td colspan="2">Temps montage (minutes)</td>
                <td ng-repeat="product in dec.products">
                    <label for="aec"></label>
                    <span id="sprytextfield34">
                        <input name="assp1" type="text" ng-model="product.assemblyTime" style="width:30px;" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (100)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>

            </tr>
            <tr>
                <td colspan="2">Matières premières haute qualité en %</td>
                <td ng-repeat="product in dec.products">
                    <label for="aec"></label>
                    <span id="sprytextfield37">
                        <input name="prem1" type="text" ng-model="product.premiumMaterialPropertion" style="width:30px;" value="0" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (100)</span>
                    </span>
                </td>

            </tr>

            <tr>
                <th colspan="5">opérations</th>
            </tr>
            <tr>
                <td colspan="2">Composants sous-traités</td>
                <td ng-repeat="subProduct in dec.subProducts">
                    <label for="aec"></label>
                    <span id="sprytextfield40">
                        <input name="subp1" type="text" ng-model="subProduct.subcontractQ" style="width:30px;" value="0" maxlength="4" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9999)</span>
                    </span>
                </td>
            </tr>

        </tbody>
    </table>

    <table class="table1" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th colspan="6">Les décisions concernant vos ressources</th>
            </tr>
            <tr>
                <th colspan="6">Agents et Distributeurs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="28%">&nbsp;</td>
                <td width="16%">Objectif prochain trimestre</td>
                <td width="16%">Soutien Financier (' 000 Dh)</td>
                <td width="16%">Commission (%)</td>
                <td colspan="2">&nbsp;</td>
            </tr>

            <tr ng-repeat="agent in dec.agents">
                <td>Agents {{$parent.marketsRefs[$index]}}</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield43">
                        <input name="agen" type="text" ng-model="agent.appointedNb" style="width:30px;" value="5" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield44">
                        <input name="ages" type="text" ng-model="agent.support" style="width:30px;" value="13" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (5)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield45">
                        <input name="agec" type="text" ng-model="agent.commissionRate" style="width:30px;" value="13" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
                <td colspan="2">&nbsp;</td>
            </tr>



            <tr>
                <th colspan="6">opérations</th>
            </tr>

            <tr ng-repeat="material in dec.materials">
                <td> Achats:Matières Premières (' 000 unité) </td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield51">
                        <input name="mats" type="text" ng-model="material.purchases[0].quantity" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td>3 mois</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield52">
                        <input name="mat3" type="text" ng-model="material.purchases[1].quantity" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
                <td width="8%">6 mois</td>
                <td width="16%">
                    <label for="aec"></label>
                    <span id="sprytextfield53">
                        <input name="mat6" type="text" ng-model="material.purchases[2].quantity" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
            </tr>

            <tr>
                <td>Heures maintenance / machine</td>
                <td ng-repeat="mach in machines">
                    <label for="aec"></label>
                    <span id="sprytextfield54">
                        <input name="macm" type="text" ng-model="mach.maintenanceHours" style="width:30px;" value="40" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td colspan="3">Nombre rotation équipes (1-3)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield55">
                        <input name="shift" type="text" ng-model="dec.shiftLevel" style="width:30px;" value="2" maxlength="1" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (1)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (3)</span>
                    </span>
                </td>
            </tr>

            <tr ng-repeat="eCom in dec.eCommerces">
                <td>Nombre total Ports opérationnels</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield56">
                        <input name="intp" type="text" ng-model="eCom.websitePortsNb" style="width:30px;" value="22" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
                <td colspan="3">Développement site internet (' 000 dh)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield57">
                        <input name="webd" type="text" ng-model="eCom.websiteDevBudget" style="width:30px;" value="41" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>
            </tr>

            <tr>
                <th colspan="6">personnel</th>
            </tr>

            <tr ng-repeat="worker in dec.workers">
                <td>Ouvriers qualifiés recrut (+) / licenc (-)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield58">
                        <input name="workh" type="text" ng-model="worker.hire" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (-9)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>

                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield59">
                        <input name="workt" type="text" ng-model="worker.trainedNb" style="width:30px;" value="0" maxlength="1" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9)</span>
                    </span>
                </td>

                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield59">
                        <input name="workt" type="text" ng-model="worker.hourlyWageRate" style="width:30px;" value="0" maxlength="1" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9)</span>
                    </span>
                </td>

            </tr>

            <tr>
                <td>Budget Gestion (' 000 dh)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield61">
                        <input name="budg" type="text" ng-model="dec.managementBudget" style="width:30px;" value="165" maxlength="3" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (30)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>

                <td colspan="3">Formation (en jours)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield62">
                        <input name="staff" type="text" ng-model="dec.staffTrainingDays" style="width:30px;" value="4" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (90)</span>
                    </span>
                </td>
            </tr>
            <tr>
                <th colspan="6">Finances</th>
            </tr>
            <tr>
                <td>Actions émises ou revendues (+/- ' 000 dh)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield63">
                        <input name="shares" type="text" ng-model="dec.sharesVariation" style="width:30px;" value="0" maxlength="4" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (-999)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (999)</span>
                    </span>
                </td>
                <td colspan="3">Dividende (%)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield64">
                        <input name="divid" type="text" ng-model="dec.dividend" style="width:30px;" value="3" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
            </tr>
            <tr ng-repeat="bkAccount in dec.bankAccounts">
                <td>Emprunts Moyen Terme (' 000 dh)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield65">
                        <input name="loan" type="text" ng-model="bkAccount.termLoans" style="width:30px;" value="0" maxlength="4" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg"></span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9999)</span>
                    </span>
                </td>
                <td colspan="3">Applications financières (+/- ' 000 dh)</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield66">
                        <input name="depo" type="text" ng-model="bkAccount.termDeposit"  style="width:30px;" value="0" maxlength="4" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (-999)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9999)</span>
                    </span>
                </td>
            </tr>

            <tr ng-repeat="mach in dec.machines">
                <td>Achat machines</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield67">
                        <input name="macb" type="text" ng-model="mach.boughtNb" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
                <td colspan="3">Vente machines</td>
                <td>
                    <label for="aec"></label>
                    <span id="sprytextfield68">
                        <input name="macs" type="text" ng-model="mach.soldNb" style="width:30px;" value="0" maxlength="2" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (99)</span>
                    </span>
                </td>
            </tr>

            <tr>
                <td>Agrandissement de l'usine (m2)</td>
                <td ng-repeat="factory in dec.factories">
                    <label for="aec"></label>
                    <span id="sprytextfield69">
                        <input name="fact" type="text" ng-model="factory.extension" style="width:30px;" value="10" maxlength="4" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (9999)</span>
                    </span>
                </td>

                <td colspan="3">Plan assurance n°(0-4)</td>
                <td ng-repeat="insurance in dec.insurances">
                    <label for="aec"></label>
                    <span id="sprytextfield70">
                        <input name="insu" type="text" ng-model="insurance.plan" style="width:30px;" value="4" maxlength="1" autocomplete="off">
                        <span class="textfieldInvalidFormatMsg">format non valide</span><span class="textfieldMinValueMsg">La valeur indiquée est inférieur au minimum requis (0)</span><span class="textfieldMaxValueMsg">La valeur saisie est supérieure à la maximale requise (4)</span>
                    </span>
                </td>
            </tr>
            <tr>
                <th colspan="6">Informations</th>
            </tr>
            <tr>
                <td>sur Parts de Marché</td>
                <td>
                    <input type="checkbox" name="mshares" ng-model="dec.orderMarketSharesInfo">
                    <label for="mshares"></label>
                </td>
                <td colspan="3">sur autres entreprises</td>
                <td>
                    <input type="checkbox" name="bint" ng-model="dec.orderCorporateActivityInfo">
                    <label for="bint"></label>
                </td>
            </tr>
        </tbody>
    </table>

</div>
<div ng-show='isResultShown'>
    <a href="" class="btn btn-primary" ng-disabled="isPortfolioDecisionCommitted" ng-click="isCommitConfirmInfoShown=true;errorInfo=false;" class="btn btn-primary">{{Label.getContent('Commit Portfolio & List Price decision')}}</a>
</div>
<div class="alert alert-danger fade in" ng-show="isCommitConfirmInfoShown">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
    <h4 ng-show='!errorInfo'>{{Label.getContent("Warning! Commit confirmation")}}</h4>
    <h4 ng-show='errorInfo'>{{Label.getContent("Error! set your BM List Price please")}}</h4>
    <p ng-show='!errorInfo'>{{Label.getContent("Producer portfolio confirm info")}}</p>
    <p>
        <button type="button" class="btn btn-danger" ng-click='submitDecision()' ng-disabled='isPortfolioDecisionCommitted'>{{Label.getContent("Take this action")}}</button>
        <button type="button" ng-click="isCommitConfirmInfoShown=false" class="btn btn-default">{{Label.getContent("Cancel")}}</button>
    </p>
</div>
